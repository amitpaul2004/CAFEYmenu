<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BrewVerse CafÃ© | Immersive Digital Menu</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;500;800&family=Pacifico&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --accent-gold: #c9a66b;
            --glass-bg: rgba(15, 10, 5, 0.88);
            --hologram-glow: rgba(201, 166, 107, 0.6);
        }

        /* --- 1. FLOATING 3D BEAN --- */
        #floating-bean {
            position: fixed; top: 0; left: 0; width: 40px; height: 40px;
            pointer-events: none; z-index: 10000; font-size: 2rem;
            display: flex; align-items: center; justify-content: center;
            transition: transform 0.1s linear; opacity: 0;
        }
        .bean-inner { animation: beanRotate 4s infinite linear; }
        @keyframes beanRotate { from { transform: rotate3d(1,1,1,0deg); } to { transform: rotate3d(1,1,1,360deg); } }

        /* --- 2. ADVANCED JS PRELOADER --- */
        #loader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #0a0806; display: flex; flex-direction: column;
            align-items: center; justify-content: center; z-index: 9999;
            transition: opacity 0.8s ease, visibility 0.8s;
        }
        .cup-wrapper { position: relative; display: flex; align-items: center; justify-content: center; perspective: 1000px; }
        .spinning-cup { font-size: 5rem; color: var(--accent-gold); display: inline-block; will-change: transform; }
        .cup-aura { position: absolute; width: 150px; height: 150px; background: radial-gradient(circle, rgba(201, 166, 107, 0.2) 0%, transparent 70%); border-radius: 50%; z-index: -1; transform: translate(-50%, -50%); top: 50%; left: 50%; }
        .loader-hidden { opacity: 0; visibility: hidden; }

        /* --- 3. MAIN UI LAYOUT --- */
        body {
            margin: 0; padding: 0; min-height: 100vh;
            display: flex; flex-direction: column; align-items: center;
            background-color: #000; color: #fff; font-family: 'Plus Jakarta Sans', sans-serif;
            overflow-x: hidden; padding-bottom: 90px;
        }

        .bg-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        .bg-image {
            width: 100%; height: 100%;
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.9)), 
                        url('https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?q=80&w=2070');
            background-size: cover; animation: kenBurns 20s infinite alternate;
        }
        @keyframes kenBurns { from { transform: scale(1.1); } to { transform: scale(1.25); } }

        header { text-align: center; padding: 40px 20px; opacity: 0; transform: translateY(-20px); transition: 1s ease; }
        body.is-visible header { opacity: 1; transform: translateY(0); }
        h1 { font-family: 'Pacifico', cursive; font-size: 3rem; margin: 0; color: var(--accent-gold); }

        /* --- 4. CATEGORY GRID & CARDS --- */
        .category-grid { display: flex; flex-direction: column; gap: 15px; width: 92%; max-width: 400px; }

        .category-card {
            position: relative; background: var(--glass-bg); backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px;
            padding: 22px; display: flex; align-items: center; gap: 18px;
            overflow: hidden; opacity: 0; transform: translateX(-30px);
            transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.5s;
            -webkit-tap-highlight-color: transparent; cursor: pointer;
        }
        body.is-visible .category-card { opacity: 1; transform: translateX(0); }

        .category-card.clicked { border-color: var(--accent-gold); }

        .icon-box {
            width: 50px; height: 50px; background: rgba(255,255,255,0.05);
            border-radius: 14px; display: flex; align-items: center; justify-content: center;
            font-size: 1.6rem; color: var(--accent-gold); pointer-events: none;
        }

        .category-name { font-weight: 800; font-size: 1.1rem; letter-spacing: 2px; text-transform: uppercase; pointer-events: none; }

        /* --- 5. FLOATING CART --- */
        #cart-btn {
            position: fixed; right: 20px; bottom: 100px; width: 65px; height: 65px;
            background: var(--glass-bg); border: 1px solid var(--accent-gold);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            z-index: 1000; font-size: 1.8rem; color: var(--accent-gold);
            animation: cartPulse 3s infinite ease-in-out; opacity: 0; transform: scale(0);
            transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        body.is-visible #cart-btn { opacity: 1; transform: scale(1); }
        @keyframes cartPulse { 50% { transform: translateY(-8px); box-shadow: 0 0 20px var(--accent-gold); } }

        .bottom-nav {
            position: fixed; bottom: 0; width: 100%; height: 75px;
            background: rgba(10,10,10,0.98); backdrop-filter: blur(20px);
            display: flex; justify-content: space-around; align-items: center;
            border-top: 1px solid rgba(255,255,255,0.1); z-index: 100;
        }
        .nav-item { color: rgba(255,255,255,0.4); font-size: 1.4rem; text-decoration: none; text-align: center; }
        .nav-item.active { color: var(--accent-gold); }
    </style>
</head>
<body>

    <div id="floating-bean"><div class="bean-inner">ðŸ«˜</div></div>

    <div id="loader">
        <div class="loader-content">
            <div class="cup-wrapper">
                <div class="cup-aura" id="aura"></div>
                <div class="spinning-cup" id="js-cup"><i class="bi bi-cup-hot"></i></div>
            </div>
            <div style="margin-top:20px; color:#fff; letter-spacing:5px; font-size:0.7rem;">BREWING EXPERIENCE</div>
        </div>
    </div>

    <div class="bg-container"><div class="bg-image"></div></div>

    <header><h1>BrewVerse</h1></header>

    <div class="category-grid">
        <div class="category-card" data-value="Starters"><div class="icon-box"><i class="bi bi-bootstrap"></i></div><span class="category-name">â€”â€”</span></div>
        <div class="category-card" data-value="MainCourse"><div class="icon-box"><i class="bi bi-bootstrap"></i></div><span class="category-name">â€”â€”</span></div>
        <div class="category-card" data-value="Mocktails"><div class="icon-box"><i class="bi bi-bootstrap"></i></div><span class="category-name">â€”â€”</span></div>
        <div class="category-card" data-value="HotDrinks"><div class="icon-box"><i class="bi bi-bootstrap"></i></div><span class="category-name">â€”â€”</span></div>
        <div class="category-card" data-value="ColdDrinks"><div class="icon-box"><i class="bi bi-bootstrap"></i></div><span class="category-name">â€”â€”</span></div>
        <div class="category-card" data-value="Desserts"><div class="icon-box"><i class="bi bi-bootstrap"></i></div><span class="category-name">â€”â€”</span></div>
    </div>

    <div id="cart-btn"><i class="bi bi-cart3"></i></div>

    <nav class="bottom-nav">
        <a href="#" class="nav-item active"><i class="bi bi-grid"></i></a>
        <a href="#" class="nav-item"><i class="bi bi-cart"></i></a>
        <a href="#" class="nav-item"><i class="bi bi-receipt"></i></a>
    </nav>

    <script>
        // --- 1. CORE ENGINES ---
        class TextScramble {
            constructor(el) { this.el = el; this.chars = '!<>-_\\/[]{}â€”=+*^?#________'; this.update = this.update.bind(this); }
            setText(newText) {
                const oldText = this.el.innerText;
                const length = Math.max(oldText.length, newText.length);
                const promise = new Promise((resolve) => this.resolve = resolve);
                this.queue = [];
                for (let i = 0; i < length; i++) {
                    const from = oldText[i] || '';
                    const to = newText[i] || '';
                    const start = Math.floor(Math.random() * 40);
                    const end = start + Math.floor(Math.random() * 40);
                    this.queue.push({ from, to, start, end });
                }
                cancelAnimationFrame(this.frameRequest);
                this.frame = 0;
                this.update();
                return promise;
            }
            update() {
                let output = ''; let complete = 0;
                for (let i = 0, n = this.queue.length; i < n; i++) {
                    let { from, to, start, end, char } = this.queue[i];
                    if (this.frame >= end) { complete++; output += to; }
                    else if (this.frame >= start) {
                        if (!char || Math.random() < 0.28) { char = this.randomChar(); this.queue[i].char = char; }
                        output += `<span style="color:var(--accent-gold)">${char}</span>`;
                    } else { output += from; }
                }
                this.el.innerHTML = output;
                if (complete === this.queue.length) { this.resolve(); }
                else { this.frameRequest = requestAnimationFrame(this.update); this.frame++; }
            }
            randomChar() { return this.chars[Math.floor(Math.random() * this.chars.length)]; }
        }

        const confirmSfx = new Audio('https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3');
        const decodeSfx = new Audio('https://assets.mixkit.co/active_storage/sfx/2567/2567-preview.mp3');
        confirmSfx.volume = 0.5; decodeSfx.volume = 0.2;

        const cup = document.getElementById('js-cup');
        const aura = document.getElementById('aura');

        // --- 2. MASTER INITIALIZATION ---
        function refreshAndShowMenu() {
            const loader = document.getElementById('loader');
            const cards = document.querySelectorAll('.category-card');
            
            // Reset states for "Back" button support
            document.body.classList.remove('is-visible');
            loader.classList.remove('loader-hidden');
            document.querySelector('header').style.opacity = '0';
            document.querySelector('.bottom-nav').style.transform = 'translateY(0)';

            // Re-animate Cup
            cup.animate([
                { transform: 'rotateY(0deg) rotateX(0deg) translateY(0px)' },
                { transform: 'rotateY(180deg) rotateX(20deg) translateY(-20px)' },
                { transform: 'rotateY(360deg) rotateX(0deg) translateY(0px)' }
            ], { duration: 3000, iterations: Infinity, easing: 'ease-in-out' });

            aura.animate([
                { opacity: 0.2, transform: 'translate(-50%, -50%) scale(0.8)' },
                { opacity: 0.6, transform: 'translate(-50%, -50%) scale(1.3)' },
                { opacity: 0.2, transform: 'translate(-50%, -50%) scale(0.8)' }
            ], { duration: 2000, iterations: Infinity, easing: 'ease-in-out' });

            setTimeout(() => {
                loader.classList.add('loader-hidden');
                document.body.classList.add('is-visible');
                
                cards.forEach((card, i) => {
                    card.classList.remove('clicked');
                    card.style.zIndex = "1"; // Reset tunnel effect
                    const el = card.querySelector('.category-name');
                    const fx = new TextScramble(el);
                    
                    setTimeout(() => {
                        decodeSfx.play().catch(() => {});
                        let name = card.dataset.value.replace(/([A-Z])/g, ' $1').trim();
                        fx.setText(name);
                    }, 500 + (i * 150));
                });
            }, 2000);
        }

        // --- 3. EVENT LISTENERS ---
        window.addEventListener('pageshow', (event) => {
            refreshAndShowMenu();
        });

        // Navigation & Tunnel Animation
        document.querySelectorAll('.category-card').forEach(card => {
            card.addEventListener('click', function() {
                confirmSfx.currentTime = 0;
                confirmSfx.play().catch(() => {});
                this.classList.add('clicked');

                // Tunnel Effect
                this.style.zIndex = "1000";
                this.animate([
                    { transform: 'scale(1)', filter: 'brightness(1) blur(0px)' },
                    { transform: 'scale(10)', filter: 'brightness(3) blur(15px)', opacity: 0 }
                ], { duration: 700, easing: 'cubic-bezier(0.7, 0, 0.3, 1)', fill: 'forwards' });

                document.querySelector('header').style.opacity = '0';
                document.querySelector('.bottom-nav').style.transform = 'translateY(100px)';

                setTimeout(() => {
                    window.location.href = this.dataset.value + ".html";
                }, 650);
            });
        });

        // Cart Burst Animation
        document.getElementById('cart-btn').addEventListener('click', function() {
            confirmSfx.play().catch(() => {});
            const burst = document.createElement('div');
            burst.style.cssText = `position:fixed; top:${this.getBoundingClientRect().top + 32}px; left:${this.getBoundingClientRect().left + 32}px; width:10px; height:10px; background:var(--accent-gold); border-radius:50%; z-index:10000; pointer-events:none;`;
            document.body.appendChild(burst);
            burst.animate([{ transform: 'scale(1)', opacity: 1 }, { transform: 'scale(300)', opacity: 1 }], { duration: 600, easing: 'ease-in' });
            setTimeout(() => { window.location.href = "Cart.html"; }, 500);
        });

        // Bean Follower
        const bean = document.getElementById('floating-bean');
        let tX = 0, tY = 0, cX = 0, cY = 0;
        const move = (e) => {
            bean.style.opacity = "1";
            tX = e.touches ? e.touches[0].clientX : e.clientX;
            tY = e.touches ? e.touches[0].clientY : e.clientY;
        };
        document.addEventListener('mousemove', move);
        document.addEventListener('touchmove', move);
        function loop() {
            cX += (tX - cX) * 0.1; cY += (tY - cY) * 0.1;
            bean.style.transform = `translate3d(${cX-20}px, ${cY-20}px, 0)`;
            requestAnimationFrame(loop);
        }
        loop();
    </script>
</body>
</html>